<tab-bar params="tabs: $root.study.questionnaires, tabName: function(q) {return q.title()}, selectedIndex: $root.selectedIndex, addFu: $root.add_questionnaire, draggable: true">
	<div class="list_parent">
		<div class="list_child">
			<label class="vertical">
				<small data-bind="text: Lang.get('questionnaire_name')"></small>
				<input type="text" data-bind="value: title"/>
				<lang-chooser></lang-chooser>
			</label>
			
			<label class="vertical">
				<input type="checkbox" data-bind="checked: isBackEnabled"/>
				<span data-bind="text: Lang.get('allow_back_button')"></span>
			</label>
			
			<widget-delete class="spacing_top" data-bind="click: $root.delete_questionnaire.bind($root, tabIndex)" params="title: Lang.get('delete_questionnaire')"></widget-delete>
		</div>
	</div>
	<div data-bind="foreach: $data.pages, dragRoot" id="questionnaire_editBox">
		<div data-bind="let: {qIndex: tabIndex, pIndex: $index(), pCount: $parent.pages().length, itemCount: inputs().length}">
			<title-row params="data: {qIndex: qIndex, pIndex: pIndex}">
				<div class="horizontal" data-bind="click: $root.movePageUp, if: pIndex != 0">
					<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7 14l5-5 5 5z"/></svg>
				</div>
				<div class="horizontal spacing_right" data-bind="click: $root.movePageDown, if: pIndex != pCount-1">
					<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7 10l5 5 5-5z"/></svg>
				</div>
					
				<div class="title horizontal" data-bind="text: Lang.get('questionnaire_edit_title', pIndex+1, itemCount)"></div>
				
				<widget-delete class="right" data-bind="click:$root.ko__remove_from_list($parents[2].pages, pIndex, Lang.get('confirm_delete_inputPage'), true)"></widget-delete>
			</title-row>
			
			<a class="line drag_hidden center spacing_top spacing_bottom" data-bind="navi: 'pageSettings,pageI:'+pIndex, text: Lang.get('page_settings')"></a>
			
			<div data-bind="visible: $data.inputs().length === 0, dragTarget: inputs" drag-index="0"></div>
			
			
			<div class="colored_lines" data-bind="foreach: $data.inputs">
				<div class="line horizontalPadding verticalPadding flexHorizontal" data-bind="dragTarget: $parent.inputs">
				
					<drag-start class="flexCenter spacing_right"></drag-start>
					
					<div class="flexGrow">
						<div class="verticalPadding highlight small_text" data-bind="text: Lang.get('input_' + responseType())+(required() ? '*' : '')+' ('+name()+')'"></div>
						<div class="verticalPadding" data-bind="html: text"></div>
					</div>
					
					<div class="nowrap" data-bind="with: $data">
						<widget-delete data-bind="click:$root.ko__remove_from_list($parentContext.$parentContext.$data.inputs, $index(), Lang.get('confirm_delete_input'))"></widget-delete>
						
						<a data-bind="navi: 'input:'+$index()+',pageI:'+pIndex+',q:'+qIndex">
							<span class="middle small_text" data-bind="text: Lang.get('change')"></span>
						</a>
					</div>
				</div>
			</div>
			<widget-add
					params="title: Lang.get('add_item')"
					data-bind="click: $root.add_input.bind($root, pIndex, qIndex)"
					class="drag_hidden verticalPadding"
			></widget-add>
		</div>
	</div>
	<hr/>
	<widget-add class="drag_hidden spacing_bottom" params="title: Lang.get('add_page')" data-bind="click: $root.ko__add_default('pages')"></widget-add>
</tab-bar>