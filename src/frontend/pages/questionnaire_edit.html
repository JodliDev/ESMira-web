<tab-bar params="tabs: $root.study.questionnaires, tabName: function(q) {return q.title()}, selectedIndex: $root.selectedIndex, addFu: $root.add_questionnaire, draggable: true">
	<div class="center">
		<label>
			<small data-bind="text: Lang.get('questionnaire_name')"></small>
			<input type="text" data-bind="value: title"/>
			<lang-options></lang-options>
		</label>
		<widget-delete class="right spacing_top" data-bind="click: $root.delete_questionnaire.bind($root, tabIndex)" params="title: Lang.get('delete_questionnaire')"></widget-delete>
	
	</div>
	<div data-bind="foreach: $data.pages, dragRoot">
		<div data-bind="let: {qIndex: tabIndex, pIndex: $index()}">
			<title-row params="title: Lang.get('page')+' '+(pIndex+1)">
				<widget-delete data-bind="click:$root.ko__remove_from_list($parents[2].pages, pIndex, Lang.get('confirm_delete_inputPage'), true)"></widget-delete>
			</title-row>
			
			<a class="line drag_hidden center spacing_top spacing_bottom" data-bind="navi: 'pageSettings,pageI:'+pIndex, text: Lang.get('page_settings')"></a>
			
			<div data-bind="visible: $data.inputs().length === 0, dragTarget: inputs" drag-index="0"></div>
			
			
			<div class="colored_lines" data-bind="foreach: $data.inputs">
				<div class="line horizontalPadding verticalPadding flexHorizontal" data-bind="dragTarget: $parent.inputs">
				
					<drag-start class="flexCenter spacing_right"></drag-start>
					
					<div class="flexGrow">
						<div class="verticalPadding highlight small_text" data-bind="text: Lang.get('input_' + responseType())+(required() ? '*' : '')+' ('+name()+')'"></div>
						<div class="verticalPadding" data-bind="html: text"></div>
					</div>
					
					<div class="nowrap" data-bind="with: $data">
						<widget-delete data-bind="click:$root.ko__remove_from_list($parentContext.$parentContext.$data.inputs, $index(), Lang.get('confirm_delete_input'))"></widget-delete>
						
						<a data-bind="navi: 'input:'+$index()+',pageI:'+pIndex+',q:'+qIndex">
							<span class="middle small_text" data-bind="text: Lang.get('change')"></span>
						</a>
					</div>
				</div>
			</div>
			<widget-add
					params="title: Lang.get('add_item')"
					data-bind="click: $root.add_input.bind($root, pIndex, qIndex)"
					class="drag_hidden verticalPadding"
			></widget-add>
		</div>
	</div>
	<hr/>
	<widget-add class="drag_hidden spacing_bottom" params="title: Lang.get('add_page')" data-bind="click: $root.ko__add_default('pages')"></widget-add>
</tab-bar>